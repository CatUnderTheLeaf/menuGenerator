#:kivy 2.0.0
<ButtonWithCross>:  
    id: box
    size_hint: None,  None
    height: "26dp"
    padding: "8dp", 0, 0, 0
    width:
        self.minimum_width - (dp(10) if DEVICE_TYPE == "desktop" else dp(20)) \
        if root.icon != 'close' else self.minimum_width

    canvas:
        Color:
            rgba: root.theme_cls.primary_color if not root.color else root.color
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: root.radius
    
    MDLabel:
        adaptive_size: True
        -text_size: None, None
        pos_hint: {"center_y": .5}
        id: label
        text: root.text
        size_hint_x: None
        width: self.texture_size[0]
        color: root.text_color if root.text_color else (root.theme_cls.text_color)
        markup: True
    
    MDIconButton:
        id: lbl_ic
        icon: root.icon
        theme_text_color: "Custom"
        adaptive_size: True
        pos_hint: {"center_y": .5}
        on_release: root.removeCustomWidget(root.parentId, root)

<MyToggleButton>:
    background_down: app.theme_cls.primary_dark

<IconToggleButton>:
    background_down: app.theme_cls.primary_dark
    background_normal: app.theme_cls.primary_color
    theme_text_color: "Custom"            
    md_bg_color: self.background_normal
    text_color: 1, 1, 1, 1
    text: " "